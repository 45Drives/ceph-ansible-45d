# Options to ctdbd, read by ctdbd_wrapper(1)
#
# See ctdbd.conf(5) for more information about CTDB configuration variables.

# Shared recovery lock file to avoid split brain.  No default.
#
# Do NOT run CTDB without a recovery lock file unless you know exactly
# what you are doing.
{% if ctdb_rados_locking %}
CTDB_RECOVERY_LOCK="!/usr/libexec/ctdb/ctdb_mutex_ceph_rados_helper {{ cluster }} client.admin {{ cephfs_metadata }} lockctdb"
{% else %}
CTDB_RECOVERY_LOCK={{ ctdb_lock_directory }}
{% endif %}

# List of nodes in the cluster.  Default is below.
# CTDB_NODES=/etc/ctdb/nodes
CTDB_NODES={{ ctdb_nodes_file }}

# List of public addresses for providing NAS services.  No default.
CTDB_PUBLIC_ADDRESSES={{ ctdb_public_addresses_file }}

# What services should CTDB manage?  Default is none.
# CTDB_MANAGES_SAMBA=yes
# CTDB_MANAGES_WINBIND=yes
{% if ctdb_manages_samba %}
CTDB_MANAGES_SAMBA=yes
{% endif %}
{% if ctdb_manages_winbind %}
CTDB_MANAGES_WINBIND=yes
{% endif %}

# Default is to use the log file below instead of syslog.
# CTDB_LOGFILE=/var/log/log.ctdb
# CTDB_SYSLOG=no

# Default log level is ERR.  NOTICE is a little more verbose.
# CTDB_DEBUGLEVEL=NOTICE

CTDB_NOSETSCHED=yes

{% if ctdb_tunables %}
CTDB_SET_MonitorInterval=5
CTDB_SET_TakeoverTimeout=5
CTDB_SET_ElectionTimeout=2
CTDB_SET_KeepaliveLimit=3
CTDB_SET_KeepaliveInterval=1
CTDB_SET_ControlTimeout=15
{% endif %}